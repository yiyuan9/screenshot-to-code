name: ğŸ”„ åŒæ­¥ Fork ä»“åº“ (Sync Fork Repository)

on:
  schedule:
    # æ¯å‘¨æ—¥ UTC 0 ç‚¹è¿è¡Œä¸€æ¬¡ (Runs every Sunday at UTC 0)
    - cron: '0 0 * * 0'
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘å·¥ä½œæµ (Allows manual workflow triggers)

jobs:
  sync:
    name: ğŸ”„ åŒæ­¥ä¸Šæ¸¸å˜æ›´ (Sync with Upstream)
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ æ£€å‡ºä»£ç  (Checkout code)
        uses: actions/checkout@v3
        with:
          fetch-depth: 0  # è·å–å®Œæ•´çš„å†å²è®°å½• (Fetch the entire history)
      
      - name: âš™ï¸ é…ç½® Git (Configure Git)
        run: |
          git config --global user.name 'GitHub Actions'
          git config --global user.email 'actions@github.com'
      
      - name: ğŸ”— æ·»åŠ ä¸Šæ¸¸ä»“åº“ (Add upstream repository)
        run: |
          git remote add upstream https://github.com/abi/screenshot-to-code.git
      
      - name: ğŸ“¡ è·å–ä¸Šæ¸¸æ›´æ–° (Fetch upstream changes)
        run: |
          git fetch upstream
      
      - name: ğŸ”€ åŒæ­¥ä¸»åˆ†æ”¯ (Sync main branch)
        run: |
          # æ£€å‡ºä¸»åˆ†æ”¯ï¼ˆmain æˆ– masterï¼‰(Checkout main branch (main or master))
          git checkout main || git checkout master
          # åˆå¹¶ä¸Šæ¸¸å˜æ›´ (Merge upstream changes)
          git merge upstream/main || git merge upstream/master
      
      - name: ğŸ“¤ æ¨é€æ›´æ–° (Push updates)
        run: |
          git push